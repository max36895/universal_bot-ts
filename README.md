# umbot

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –¥–≤–∏–∂–æ–∫ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —á–∞—Ç-–±–æ—Ç–æ–≤ –∏ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –Ω–∞–≤—ã–∫–æ–≤ —Å –µ–¥–∏–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º.

[![npm version](https://badge.fury.io/js/umbot.svg)](https://badge.fury.io/js/umbot)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![TypeScript](https://img.shields.io/badge/TypeScript-Ready-blue)]()
[![Templates](https://img.shields.io/badge/Templates-3+-green)]()
[![Security](https://img.shields.io/badge/Security-A+-red)]()

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö:

### –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

-   [API Reference](src/docs/api-reference.md) - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤, –º–µ—Ç–æ–¥–æ–≤ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
-   [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](src/docs/getting-started.md) - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ, –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞
-   [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏](src/docs/platform-integration.md) - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏

## üìö –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

-   [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](src/docs/getting-started.md)
-   [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏](src/docs/platform-integration.md)
-   [–ü—Ä–∏–º–µ—Ä—ã](examples/README.md)
-   [FAQ](src/docs/getting-started.md#—á–∞—Å—Ç–æ-–∑–∞–¥–∞–≤–∞–µ–º—ã–µ-–≤–æ–ø—Ä–æ—Å—ã)
-   [API](https://www.maxim-m.ru/bot/ts-doc/index.html)

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

-   üìö [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://www.maxim-m.ru/bot/ts-doc/index.html)
-   üì¢ [Telegram –∫–∞–Ω–∞–ª](https://t.me/joinchat/AAAAAFM8AcuniLTwBLuNsw)
-   üí¨ [Telegram –≥—Ä—É–ø–ø–∞](https://t.me/mm_universal_bot)
-   üêõ [Issues –Ω–∞ GitHub](https://github.com/max36895/universal_bot-ts/issues)

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ

–î–≤–∏–∂–æ–∫ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å –Ω–∞–≤—ã–∫ –¥–ª—è `–Ø–Ω–¥–µ–∫—Å.–ê–ª–∏—Å–∞`, `–ú–∞—Ä—É—Å–∏`, `–°–±–µ—Ä(SmartApp)`, –∞ —Ç–∞–∫–∂–µ –±–æ—Ç–∞ –¥–ª—è `VK`, `Viber` –∏–ª–∏
`Telegram`, —Å –∏–¥–µ–Ω—Ç–∏—á–Ω–æ–π –ª–æ–≥–∏–∫–æ–π. –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–æ–¥ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º, —á—Ç–æ
–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É.

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ—ë –∑–Ω–∞—á–µ–Ω–∏–µ –≤ `mmApp.appType`. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ
`alisa`.

## üìö –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

| –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞                  | –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä      | –°—Ç–∞—Ç—É—Å               |
| -------------------------- | ------------------ | -------------------- |
| –Ø–Ω–¥–µ–∫—Å.–ê–ª–∏—Å–∞               | `alisa`            | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞  |
| –ú–∞—Ä—É—Å—è                     | `marusia`          | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞  |
| –°–±–µ—Ä SmartApp              | `smart_app`        | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞  |
| Telegram                   | `telegram`         | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞  |
| VK                         | `vk`               | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞  |
| Viber                      | `viber`            | ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞  |
| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã | `user_application` | ‚úÖ –ë–∞–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ |

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

-   ‚ú® –ï–¥–∏–Ω—ã–π –∫–æ–¥ –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
-   üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π
-   üíæ –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
-   üé® –ë–æ–≥–∞—Ç—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ UI (–∫–Ω–æ–ø–∫–∏, –∫–∞—Ä—Ç–æ—á–∫–∏, –≥–∞–ª–µ—Ä–µ–∏)
-   üîä –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞
-   üöÄ **–ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** - TypeScript –∏–∑ –∫–æ—Ä–æ–±–∫–∏, –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ IDE

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –≠—Ö–æ-–±–æ—Ç

#### –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (index.ts)

```typescript
import { Bot } from 'umbot';
import { EchoController } from './EchoController';
import { IncomingMessage, ServerResponse } from 'http';

const bot = new Bot();

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
bot.initParams({
    json: __dirname + '/data', // –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
    error_log: __dirname + '/logs', // –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ª–æ–≥–æ–≤
    isLocalStorage: true, // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞
const logic = new EchoController();
bot.initBotController(logic);

// –≠–∫—Å–ø–æ—Ä—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –¥–ª—è serverless
module.exports = async (req: IncomingMessage, res: ServerResponse) => {
    bot.start(req, res);
};
```

#### –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (EchoController.ts)

```typescript
import { BotController, WELCOME_INTENT_NAME } from 'umbot';

export class EchoController extends BotController {
    public action(intentName: string): void {
        if (intentName === WELCOME_INTENT_NAME) {
            this.text = '–ü—Ä–∏–≤–µ—Ç! –Ø –±—É–¥—É –ø–æ–≤—Ç–æ—Ä—è—Ç—å –∑–∞ —Ç–æ–±–æ–π.';
            return;
        }
        this.text = `–í—ã —Å–∫–∞–∑–∞–ª–∏: ${this.userCommand}`;
    }
}
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Git

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –≤ –ø–∞–ø–∫—É u_bot
git clone https://github.com/max36895/universal_bot-ts.git u_bot
cd u_bot
npm install
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ npm

```bash
npm install umbot
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

#### 1. –°–æ–∑–¥–∞–Ω–∏–µ package.json

–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è package.json:

```json
{
    "name": "my-umbot-project",
    "description": "–û–ø–∏—Å–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞",
    "main": "index.js",
    "scripts": {
        "start": "node ./dist/index.js",
        "build": "rm -rf dist/ && tsc"
    },
    "dependencies": {
        "umbot": "*"
    }
}
```

#### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

#### 3. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞:

```
my-bot/
  ‚îú‚îÄ‚îÄ src/
  ‚îÇ   ‚îî‚îÄ‚îÄ controller/
  ‚îÇ       ‚îî‚îÄ‚îÄ MyController.ts
  ‚îú‚îÄ‚îÄ package.json
  ‚îî‚îÄ‚îÄ index.ts
```

##### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–≥–æ –±–æ—Ç–∞

1. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –±–æ—Ç–∞ (src/controller/MyController.ts):

```typescript
import { BotController, WELCOME_INTENT_NAME } from 'umbot';

export class MyController extends BotController {
    public action(intentName: string): void {
        switch (intentName) {
            case WELCOME_INTENT_NAME:
                this.text = '–ü—Ä–∏–≤–µ—Ç! –Ø –Ω–æ–≤—ã–π –±–æ—Ç –Ω–∞ umbot üëã';
                this.buttons.addBtn('–ü–æ–º–æ—â—å');
                break;

            case 'help':
                this.text =
                    '–Ø —É–º–µ—é:\n' +
                    '- –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ\n' +
                    '- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–Ω–æ–ø–∫–∏\n' +
                    '- –ó–∞–ø–æ–º–∏–Ω–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π';
                break;

            default:
                this.text = '–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –≤–∞—Å –Ω–µ –ø–æ–Ω—è–ª ü§î\n–°–∫–∞–∂–∏—Ç–µ "–ø–æ–º–æ—â—å" –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥';
                break;
        }
    }
}
```

2. –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (index.ts):

```typescript
import { Bot } from 'umbot';
import { MyController } from './src/controller/MyController';
import { IncomingMessage, ServerResponse } from 'http';

const bot = new Bot();

// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥
bot.initConfig({
    intents: [
        {
            name: 'help',
            slots: ['–ø–æ–º–æ—â—å', '—á—Ç–æ —Ç—ã —É–º–µ–µ—à—å'],
        },
    ],
});

// –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
bot.initParams({
    json: __dirname + '/data', // –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
    error_log: __dirname + '/logs', // –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ª–æ–≥–æ–≤
    isLocalStorage: true, // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
    welcome_text: '–ü—Ä–∏–≤–µ—Ç! –Ø –Ω–æ–≤—ã–π –±–æ—Ç', // –¢–µ–∫—Å—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
});

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏
const controller = new MyController();
bot.initBotController(controller);

// –≠–∫—Å–ø–æ—Ä—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –¥–ª—è serverless
module.exports = async (req: IncomingMessage, res: ServerResponse) => {
    bot.start(req, res);
};
```

##### –†–∞–±–æ—Ç–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏

```typescript
import { BotController } from 'umbot';

export class ButtonController extends BotController {
    public action(intentName: string): void {
        switch (intentName) {
            case 'showButtons':
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
                this.text = '–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:';
                this.buttons.addBtn('–ö–Ω–æ–ø–∫–∞ 1').addBtn('–ö–Ω–æ–ø–∫–∞ 2', 'https://example.com'); // –ö–Ω–æ–ø–∫–∞ —Å URL
                break;

            default:
                this.text = '–°–∫–∞–∂–∏—Ç–µ "–ø–æ–∫–∞–∂–∏ –∫–Ω–æ–ø–∫–∏"';
                break;
        }
    }
}
```

##### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥

```typescript
import { mmApp, BotController } from 'umbot';

// –ü—Ä–æ—Å—Ç–∞—è –∫–æ–º–∞–Ω–¥–∞ —Å–æ —Å–ª–æ–≤–∞–º–∏-—Ç—Ä–∏–≥–≥–µ—Ä–∞–º–∏
mmApp.addCommand(
    'greeting',
    ['–ø—Ä–∏–≤–µ—Ç', '–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π'],
    (userCommand: string, botController?: BotController) => {
        if (botController) {
            botController.text = '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!';
        }
    },
);

// –ö–æ–º–∞–Ω–¥–∞ —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏
mmApp.addCommand(
    'numbers',
    ['\\b\\d{3}\\b'], // –ß–∏—Å–ª–∞ –æ—Ç 100 –¥–æ 999
    (userCommand: string, botController?: BotController) => {
        if (botController) {
            botController.text = `–í—ã –≤–≤–µ–ª–∏ —á–∏—Å–ª–æ: ${userCommand}`;
        }
    },
    true, // isPattern = true –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π
);

// –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ –∏–º–µ–Ω–∏
mmApp.removeCommand('greeting');
```

–í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è:

-   –ü—Ä–∏ `isPattern: true` —Å—Ç—Ä–æ–∫–∏ –≤ `slots` –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
-   –ë–µ–∑ `isPattern` (–∏–ª–∏ `isPattern: false`) –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–∏—Å–∫ —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å–ª–æ–≤
-   Callback-—Ñ—É–Ω–∫—Ü–∏—è –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Ç—Ä–æ–∫—É (–æ–Ω–∞ —Å—Ç–∞–Ω–µ—Ç –æ—Ç–≤–µ—Ç–æ–º) –∏–ª–∏ void
-   –í callback –¥–æ—Å—Ç—É–ø–µ–Ω –≤–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª `BotController`

#### 4. –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–º–∞–Ω–¥–æ–π

```bash
npm run build
```

#### 5. –ó–∞–ø—É—Å–∫

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:

```bash
npm start
```

–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É `http`, –Ω–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–µ —É–¥–æ–±–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∏—Ç–µ –µ–≥–æ –Ω–∞ —Å–≤–æ–π —Å–µ—Ä–≤–µ—Ä, –∏ –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ssl —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–î–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–≤–∞ –ø–æ–¥—Ö–æ–¥–∞:

1. –ü—Ä—è–º–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```typescript
bot.initParams({
    telegram_token: 'your-telegram-token',
    vk_token: 'your-vk-token',
});
bot.initConfig({
    db: {
        host: 'localhost',
        user: 'user',
        password: 'password',
        database: 'bot_db',
    },
});
```

2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞:

```typescript
bot.initConfig({
    env: './.env',
});
```

–ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ .env —Ñ–∞–π–ª–∞:

```text
TELEGRAM_TOKEN=your-telegram-token
VK_TOKEN=your-vk-token
VIBER_TOKEN=your-viber-token
YANDEX_TOKEN=your-alisa-token
MARUSIA_TOKEN=your-marusia-token
SMARTAPP_TOKEN=your-smartapp-token

DB_HOST=localhost
DB_USER=user
DB_PASSWORD=password
DB_NAME=bot_db
```

–í—ã –º–æ–∂–µ—Ç–µ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –æ–±–∞ –ø–æ–¥—Ö–æ–¥–∞ - –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ .env —Ñ–∞–π–ª–∞ –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

–î–ª—è —Ä–∞–±–æ—Ç—ã –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–º–µ—Ç—å ssl —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç. –ü–æ—ç—Ç–æ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –µ–≥–æ –ø–æ–ª—É—á–∏—Ç—å. –î–ª—è —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ
–≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è acme.

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ acme.sh

```bash
curl https://get.acme.sh | sh
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –¥–ª—è —Å–∞–π—Ç–∞

```bash
acme.sh --issue -d {{domain}} -w {{domain dir}}
```

1. domain - –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–º–µ–Ω–∞ (example.com)
2. domain dir - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å–∞–π—Ç

```bash
acme.sh --install-cert -d {{domain}} --key-file {{key file}} --fullchain-file {{cert file}} --reloadcmd "service nginx reload"
```

1. domain - –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–º–µ–Ω–∞ (example.com)
2. key file - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, –≤ –∫–æ—Ç–æ—Ä–æ–π —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–ª—é—á —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
3. cert file - –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è, –≤ –∫–æ—Ç–æ—Ä–æ–π —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

## –í–∞–∂–Ω–æ!

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä. –î–ª—è ngnix - `sudo service nginx reload`

# üõ† –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

-   [CLI](./cli/README.md) –∫–æ–º–∞–Ω–¥—ã
-   –®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–µ–∫—Ç–æ–≤: [—Ç—É—Ç](./examples/README.md)

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

-   [–°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–≤—ã–∫–∞ "–Ø –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ"](https://www.maxim-m.ru/article/sozdanie-navyika-ya-nikogda-ne)
-   [–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–µ–∫—Ç–æ–≤](./examples/README.md)
-   [–°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π](./CHANGELOG.md)

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–Ω–æ 2 —Å–ø–æ—Å–æ–±–∞–º–∏:

1. –ó–∞–≥—Ä—É–∑–∏–≤ –ø—Ä–æ–µ–∫—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–ê–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è –ê–ª–∏—Å—ã –∏ —Å–±–µ—Ä–∞).
2. –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å, —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ –¥–≤–∏–∂–∫–∞ (–ª–æ–∫–∞–ª—å–Ω–æ).

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ü–µ—Ä–µ–π—Ç–∏ –≤ [–∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞](https://dialogs.yandex.ru/developer), –∏ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
–î–∞–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è –ê–ª–∏—Å—ã. –î–ª—è –¥—Ä—É–≥–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º —Å—Å—ã–ª–∫–∞ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª–∏

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ—Ç –∂–µ –∫–æ–¥, —á—Ç–æ –∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞.
–° —Ç–æ–π –ª–∏—à—å —Ä–∞–∑–Ω–∏—Ü–µ–π, —á—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å `BotTest` –≤–º–µ—Å—Ç–æ `Bot`.
–ó–∞–ø—É—Å–∫ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```bash
npm run test
node index.js
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –∫–æ–Ω—Å–æ–ª—å —Å –í–∞—à–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º. –î–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ —Ä–µ–∂–∏–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω—É–∂–Ω–æ:

1. –ï—Å–ª–∏ –Ω–∞–≤—ã–∫ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —Å—Ç–∞–≤–∏—Ç `isEnd` –≤ True (–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞), —Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–æ –¥–æ–π—Ç–∏ –¥–æ —Ç–æ–≥–æ
   –º–µ—Å—Ç–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è, –≤ –∫–æ—Ç–æ—Ä–æ–º –¥–∏–∞–ª–æ–≥ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è.
2. –í—ã–∑–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É exit.

–ü–æ–º–∏–º–æ –æ—Ç–≤–µ—Ç–æ–≤, –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.

# üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License. –°–º. [LICENSE](./LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

# ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:

-   üìß Email: maximco36895@yandex.ru
-   üí¨ [Telegram –≥—Ä—É–ø–ø–∞](https://t.me/mm_universal_bot)
-   üêõ [Issues –Ω–∞ GitHub](https://github.com/max36895/universal_bot-ts/issues)
