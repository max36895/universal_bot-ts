import { TemplateCardTypes } from './TemplateCardTypes';
import { ImageTokens } from '../../../models/ImageTokens';
import { Buttons, IVkButton } from '../../button';

/**
 * @interface IVkCardElement
 * –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ.
 * –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –∫–∞—Ä—É—Å–µ–ª–∏ –∏–ª–∏ –≥–∞–ª–µ—Ä–µ–µ.
 *
 * –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
 * - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ
 * - –ú–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–æ 3 –∫–Ω–æ–ø–æ–∫
 * - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π
 * - –¢—Ä–µ–±—É–µ—Ç ID —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏–∑ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ
 *
 * @example
 * ```typescript
 * // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –∫–Ω–æ–ø–∫–∞–º–∏
 * const element: IVkCardElement = {
 *     title: '–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞',
 *     description: '–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞',
 *     photo_id: '123456789',
 *     buttons: [
 *         { action: { type: 'text', label: '–ö—É–ø–∏—Ç—å' } },
 *         { action: { type: 'link', link: 'https://example.com' } }
 *     ],
 *     action: { type: 'open_photo' }
 * };
 *
 * // –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–∞—Ä—Ç–æ—á–∫–∏
 * const simpleElement: IVkCardElement = {
 *     title: '–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è',
 *     description: '–û–ø–∏—Å–∞–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏',
 *     photo_id: '987654321'
 * };
 * ```
 */
export interface IVkCardElement {
    /**
     * –ó–∞–≥–æ–ª–æ–≤–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–∞—Ä—Ç–æ—á–∫–∏.
     * –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ —ç–ª–µ–º–µ–Ω—Ç–∞.
     *
     * –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
     * - –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –¥–ª–∏–Ω–∞: –¥–æ 80 —Å–∏–º–≤–æ–ª–æ–≤
     * - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç–º–æ–¥–∑–∏
     * - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∂–∏—Ä–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º
     *
     * @type {string}
     * @example
     * ```typescript
     * title: '–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞'
     * title: 'üî• –ì–æ—Ä—è—á–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ'
     * ```
     */
    title: string;

    /**
     * –û–ø–∏—Å–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–∞—Ä—Ç–æ—á–∫–∏.
     * –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º.
     *
     * –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
     * - –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –¥–ª–∏–Ω–∞: –¥–æ 200 —Å–∏–º–≤–æ–ª–æ–≤
     * - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫
     * - –ú–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å—Å—ã–ª–∫–∏
     *
     * @type {string}
     * @example
     * ```typescript
     * description: '–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞'
     * description: '–¶–µ–Ω–∞: 1000 —Ä—É–±.\n–î–æ—Å—Ç–∞–≤–∫–∞: –±–µ—Å–ø–ª–∞—Ç–Ω–æ'
     * ```
     */
    description: string;

    /**
     * –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ.
     * –§–æ—Ä–º–∞—Ç: —Å—Ç—Ä–æ–∫–∞ –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ 'photo'.
     *
     * –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
     * - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º ID —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏
     * - –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –≤ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ
     * - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
     *
     * @type {string}
     * @example
     * ```typescript
     * photo_id: '123456789'
     * photo_id: '987654321_456789'
     * ```
     */
    photo_id: string;

    /**
     * –ú–∞—Å—Å–∏–≤ –∫–Ω–æ–ø–æ–∫ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞ –∫–∞—Ä—Ç–æ—á–∫–∏.
     * –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–æ–ø–æ–∫ - 3.
     *
     * –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
     * - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –∫–Ω–æ–ø–æ–∫
     * - –ö–∞–∂–¥–∞—è –∫–Ω–æ–ø–∫–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ
     * - –ö–Ω–æ–ø–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ –∫–∞—Ä—Ç–æ—á–∫–∏
     *
     * @type {IVkButton[]}
     * @example
     * ```typescript
     * // –ö–Ω–æ–ø–∫–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏
     * buttons: [
     *     { action: { type: 'text', label: '–ö—É–ø–∏—Ç—å' } },
     *     { action: { type: 'link', link: 'https://example.com' } },
     *     { action: { type: 'callback', label: '–ü–æ–¥—Ä–æ–±–Ω–µ–µ' } }
     * ]
     *
     * // –û–¥–Ω–∞ –∫–Ω–æ–ø–∫–∞
     * buttons: [
     *     { action: { type: 'text', label: '–ü–æ–¥—Ä–æ–±–Ω–µ–µ' } }
     * ]
     * ```
     */
    buttons?: IVkButton[];

    /**
     * –î–µ–π—Å—Ç–≤–∏–µ, –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–µ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–∫–∏.
     *
     * –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
     * - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É
     * - –ú–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –∏–ª–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –¥—Ä—É–≥–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
     * - –†–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∫–Ω–æ–ø–æ–∫
     *
     * @type {{ type: string }}
     * @example
     * ```typescript
     * // –û—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é
     * action: { type: 'open_photo' }
     *
     * // –í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ
     * action: { type: 'callback' }
     * ```
     */
    action?: {
        /**
         * –¢–∏–ø –¥–µ–π—Å—Ç–≤–∏—è.
         */
        type: string;
    };
}

/**
 * @interface IVkCard
 * –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ.
 * –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–∞—Ä—Ç–æ—á–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞—Ä—É—Å–µ–ª—å—é –∏–ª–∏ –≥–∞–ª–µ—Ä–µ–µ–π.
 *
 * –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
 * - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ç–∏–ø–∞ –∫–∞—Ä—Ç–æ—á–µ–∫: –∫–∞—Ä—É—Å–µ–ª—å –∏ –≥–∞–ª–µ—Ä–µ—è
 * - –ú–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
 * - –≠–ª–µ–º–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∏–º–µ—Ç—å –∫–Ω–æ–ø–∫–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—è
 * - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
 *
 * @example
 * ```typescript
 * // –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—É—Å–µ–ª–∏ —Å —Ç–æ–≤–∞—Ä–∞–º–∏
 * const carousel: IVkCard = {
 *     type: 'carousel',
 *     elements: [
 *         {
 *             title: '–¢–æ–≤–∞—Ä 1',
 *             description: '–û–ø–∏—Å–∞–Ω–∏–µ 1',
 *             photo_id: '123456789',
 *             buttons: [{ action: { type: 'text', label: '–ö—É–ø–∏—Ç—å' } }]
 *         },
 *         {
 *             title: '–¢–æ–≤–∞—Ä 2',
 *             description: '–û–ø–∏—Å–∞–Ω–∏–µ 2',
 *             photo_id: '987654321',
 *             buttons: [{ action: { type: 'text', label: '–ö—É–ø–∏—Ç—å' } }]
 *         }
 *     ]
 * };
 *
 * // –°–æ–∑–¥–∞–Ω–∏–µ –≥–∞–ª–µ—Ä–µ–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
 * const gallery: IVkCard = {
 *     type: 'gallery',
 *     elements: [
 *         {
 *             title: '–§–æ—Ç–æ 1',
 *             description: '–û–ø–∏—Å–∞–Ω–∏–µ 1',
 *             photo_id: '123456789',
 *             action: { type: 'open_photo' }
 *         },
 *         {
 *             title: '–§–æ—Ç–æ 2',
 *             description: '–û–ø–∏—Å–∞–Ω–∏–µ 2',
 *             photo_id: '987654321',
 *             action: { type: 'open_photo' }
 *         }
 *     ]
 * };
 * ```
 */
export interface IVkCard {
    /**
     * –¢–∏–ø –∫–∞—Ä—Ç–æ—á–∫–∏.
     * –ú–æ–∂–µ—Ç –±—ã—Ç—å 'carousel' –¥–ª—è –∫–∞—Ä—É—Å–µ–ª–∏ –∏–ª–∏ 'gallery' –¥–ª—è –≥–∞–ª–µ—Ä–µ–∏.
     *
     * –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
     * - –ö–∞—Ä—É—Å–µ–ª—å: —ç–ª–µ–º–µ–Ω—Ç—ã –º–æ–∂–Ω–æ –ª–∏—Å—Ç–∞—Ç—å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ
     * - –ì–∞–ª–µ—Ä–µ—è: —ç–ª–µ–º–µ–Ω—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Å–µ—Ç–∫–µ
     * - –¢–∏–ø –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–ø–æ—Å–æ–± –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
     *
     * @type {string}
     * @example
     * ```typescript
     * // –ö–∞—Ä—É—Å–µ–ª—å —Ç–æ–≤–∞—Ä–æ–≤
     * type: 'carousel'
     *
     * // –ì–∞–ª–µ—Ä–µ—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
     * type: 'gallery'
     * ```
     */
    type: string;

    /**
     * –ú–∞—Å—Å–∏–≤ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫–∞—Ä—Ç–æ—á–∫–∏.
     * –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ—Ç–¥–µ–ª—å–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É –≤ –∫–∞—Ä—É—Å–µ–ª–∏.
     *
     * –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
     * - –ú–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
     * - –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –∏–º–µ–µ—Ç —Å–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
     * - –≠–ª–µ–º–µ–Ω—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –∫–∞—Ä—Ç–æ—á–∫–∏
     *
     * @type {IVkCardElement[]}
     * @example
     * ```typescript
     * // –≠–ª–µ–º–µ–Ω—Ç—ã –∫–∞—Ä—É—Å–µ–ª–∏
     * elements: [
     *     { title: '–¢–æ–≤–∞—Ä 1', description: '–û–ø–∏—Å–∞–Ω–∏–µ 1', photo_id: '123456789' },
     *     { title: '–¢–æ–≤–∞—Ä 2', description: '–û–ø–∏—Å–∞–Ω–∏–µ 2', photo_id: '987654321' }
     * ]
     *
     * // –≠–ª–µ–º–µ–Ω—Ç—ã –≥–∞–ª–µ—Ä–µ–∏
     * elements: [
     *     { title: '–§–æ—Ç–æ 1', description: '–û–ø–∏—Å–∞–Ω–∏–µ 1', photo_id: '123456789' },
     *     { title: '–§–æ—Ç–æ 2', description: '–û–ø–∏—Å–∞–Ω–∏–µ 2', photo_id: '987654321' }
     * ]
     * ```
     */
    elements: IVkCardElement[];
}

/**
 * @class VkCard
 * –ö–ª–∞—Å—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ.
 * –ù–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç TemplateCardTypes –∏ —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—É—é –¥–ª—è –í–ö–æ–Ω—Ç–∞–∫—Ç–µ –ª–æ–≥–∏–∫—É.
 *
 * –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
 * - –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—É—Å–µ–ª–∏ —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
 * - –°–æ–∑–¥–∞–Ω–∏–µ –≥–∞–ª–µ—Ä–µ–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
 * - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–Ω–æ–ø–æ–∫ (–¥–æ 3 –∫–Ω–æ–ø–æ–∫ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É)
 * - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ
 * - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–µ–π—Å—Ç–≤–∏–π
 * - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã —Ç–µ–∫—Å—Ç–∞
 * - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏–π
 *
 * @example
 * ```typescript
 * // –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—É—Å–µ–ª–∏ —Å —Ç–æ–≤–∞—Ä–∞–º–∏
 * const card = new VkCard();
 * card.title = '–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤';
 * card.images = [
 *     new Image('product1.jpg', '–¢–æ–≤–∞—Ä 1', '–û–ø–∏—Å–∞–Ω–∏–µ 1'),
 *     new Image('product2.jpg', '–¢–æ–≤–∞—Ä 2', '–û–ø–∏—Å–∞–Ω–∏–µ 2')
 * ];
 * const carousel = await card.getCard(false);
 *
 * // –°–æ–∑–¥–∞–Ω–∏–µ –≥–∞–ª–µ—Ä–µ–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
 * const galleryCard = new VkCard();
 * galleryCard.isUsedGallery = true;
 * galleryCard.images = [
 *     new Image('photo1.jpg', '–§–æ—Ç–æ 1', '–û–ø–∏—Å–∞–Ω–∏–µ 1'),
 *     new Image('photo2.jpg', '–§–æ—Ç–æ 2', '–û–ø–∏—Å–∞–Ω–∏–µ 2')
 * ];
 * const gallery = await galleryCard.getCard(false);
 * ```
 */
export class VkCard extends TemplateCardTypes {
    /**
     * –ü–æ–ª—É—á–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ.
     *
     * –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã:
     * 1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
     * 2. –ï—Å–ª–∏ isOne=true –∏–ª–∏ –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:
     *    - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ
     *    - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ —Å ID –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
     * 3. –ò–Ω–∞—á–µ:
     *    - –°–æ–∑–¥–∞–µ—Ç –∫–∞—Ä—É—Å–µ–ª—å –∏–ª–∏ –≥–∞–ª–µ—Ä–µ—é
     *    - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
     *    - –î–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫–∏ (–¥–æ 3 –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É)
     *    - –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç (–∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ)
     *
     * @param {boolean} isOne - –§–ª–∞–≥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
     * @returns {Promise<IVkCard | string[]>} –ö–∞—Ä—Ç–æ—á–∫–∞ –∏–ª–∏ –º–∞—Å—Å–∏–≤ ID –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
     *
     * @example
     * ```typescript
     * const card = new VkCard();
     * card.images = [
     *     new Image('product1.jpg', '–¢–æ–≤–∞—Ä 1', '–û–ø–∏—Å–∞–Ω–∏–µ 1'),
     *     new Image('product2.jpg', '–¢–æ–≤–∞—Ä 2', '–û–ø–∏—Å–∞–Ω–∏–µ 2')
     * ];
     *
     * // –ü–æ–ª—É—á–∏—Ç—å –æ–¥–Ω—É –∫–∞—Ä—Ç–æ—á–∫—É
     * const singleCard = await card.getCard(true);
     * // singleCard = ['123456789']
     *
     * // –ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ä—É—Å–µ–ª—å
     * const carousel = await card.getCard(false);
     * // carousel = {
     * //     type: 'carousel',
     * //     elements: [
     * //         { title: '–¢–æ–≤–∞—Ä 1', description: '–û–ø–∏—Å–∞–Ω–∏–µ 1', photo_id: '123456789' },
     * //         { title: '–¢–æ–≤–∞—Ä 2', description: '–û–ø–∏—Å–∞–Ω–∏–µ 2', photo_id: '987654321' }
     * //     ]
     * // }
     *
     * // –ü–æ–ª—É—á–∏—Ç—å –≥–∞–ª–µ—Ä–µ—é
     * card.isUsedGallery = true;
     * const gallery = await card.getCard(false);
     * // gallery = {
     * //     type: 'gallery',
     * //     elements: [
     * //         { title: '–¢–æ–≤–∞—Ä 1', description: '–û–ø–∏—Å–∞–Ω–∏–µ 1', photo_id: '123456789' },
     * //         { title: '–¢–æ–≤–∞—Ä 2', description: '–û–ø–∏—Å–∞–Ω–∏–µ 2', photo_id: '987654321' }
     * //     ]
     * // }
     * ```
     */
    public async getCard(isOne: boolean): Promise<IVkCard | string[]> {
        const object = [];
        const countImage = this.images.length;
        if (countImage) {
            if (countImage === 1 || isOne) {
                if (!this.images[0].imageToken) {
                    if (this.images[0].imageDir) {
                        const mImage = new ImageTokens(this._appContext);
                        mImage.type = ImageTokens.T_VK;
                        mImage.path = this.images[0].imageDir;
                        this.images[0].imageToken = await mImage.getToken();
                    }
                }
                if (this.images[0].imageToken) {
                    object.push(this.images[0].imageToken);
                }
            } else {
                const elements = [];
                for (let i = 0; i < this.images.length; i++) {
                    const image = this.images[i];
                    if (!image.imageToken) {
                        if (image.imageDir) {
                            const mImage = new ImageTokens(this._appContext);
                            mImage.type = ImageTokens.T_VK;
                            mImage.path = image.imageDir;
                            image.imageToken = await mImage.getToken();
                        }
                    }
                    if (image.imageToken) {
                        if (this.isUsedGallery) {
                            const element: IVkCardElement = {
                                title: image.title,
                                description: image.desc,
                                photo_id: image.imageToken.replace('photo', ''),
                            };
                            const button = image.button.getButtons(Buttons.T_VK_BUTTONS);
                            if (button?.buttons?.length) {
                                element.buttons = button.buttons.slice(0, 3);
                            }
                            elements.push(element);
                            //object.push(image.imageToken);
                        } else {
                            const element: IVkCardElement = {
                                title: image.title,
                                description: image.desc,
                                photo_id: image.imageToken.replace('photo', ''),
                            };
                            const button = image.button.getButtons(Buttons.T_VK_BUTTONS);
                            /*
                             * –£ –∫–∞—Ä—Ç–æ—á–∫–∏ –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ö–æ—Ç—å –æ–¥–Ω–∞ –∫–Ω–æ–ø–∫–∞.
                             * –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–æ–ø–æ–∫ 3
                             */
                            if (button.one_time) {
                                element.buttons = button.buttons.splice(0, 3);
                                element.action = { type: 'open_photo' };
                                elements.push(element);
                            }
                        }
                    }
                }
                if (elements.length) {
                    return {
                        type: 'carousel',
                        elements,
                    };
                }
            }
        }
        return object;
    }
}
