# ะะฐะทะฒะตัััะฒะฐะฝะธะต ะฒ ะฟัะพะดะฐะบัะตะฝะต

## ะขัะตะฑะพะฒะฐะฝะธั

- ะกะตัะฒะตั ั ะฟัะฑะปะธัะฝัะผ IP-ะฐะดัะตัะพะผ
- ะะพะผะตะฝะฝะพะต ะธะผั
- SSL-ัะตััะธัะธะบะฐั (ะพะฑัะทะฐัะตะปะตะฝ ะดะปั ะฏะฝะดะตะบั.ะะปะธัั, ะกะฑะตั SmartApp, ะะฐัััะธ, Viber ะธ ะดััะณะธั ะฟะปะฐััะพัะผ)

## ะะพะปััะตะฝะธะต SSL-ัะตััะธัะธะบะฐัะฐ ัะตัะตะท acme.sh

### 1. ะฃััะฐะฝะพะฒะธัะต `acme.sh`:

```bash
curl https://get.acme.sh | sh
```

### 2. ะัะฟัััะธัะต ัะตััะธัะธะบะฐั:

```bash
acme.sh --issue -d example.com -w /var/www/example
```

ะะดะต:

- example.com โ ะฒะฐั ะดะพะผะตะฝ
- /var/www/example โ ะบะพัะฝะตะฒะฐั ะดะธัะตะบัะพัะธั ัะฐะนัะฐ (ะดะพะปะถะฝะฐ ะฑััั ะดะพัััะฟะฝะฐ ะฟะพ HTTP ะดะปั ะฟัะพัะพะถะดะตะฝะธั ะฟัะพะฒะตัะบะธ)

### 3. ะฃััะฐะฝะพะฒะธัะต ัะตััะธัะธะบะฐั ะฒ ะฝัะถะฝัะต ะฟััะธ:

```bash
acme.sh --install-cert -d example.com \
  --key-file /etc/ssl/private/example.key \
  --fullchain-file /etc/ssl/certs/example.crt \
  --reloadcmd "sudo systemctl reload nginx"
```

## ะะฐัััะพะนะบะฐ nginx

ะะพะฑะฐะฒััะต ะฒ ะบะพะฝัะธะณััะฐัะธั nginx:

```nginx
server {
    listen 443 ssl;
    server_name example.com;

    ssl_certificate /etc/ssl/certs/example.crt;
    ssl_certificate_key /etc/ssl/private/example.key;

    location / {
        proxy_pass http://127.0.0.1:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

ะะตัะตะทะฐะณััะทะธัะต nginx:

```bash
sudo systemctl reload nginx
```

## ะะฐะฟััะบ ะฟัะธะปะพะถะตะฝะธั

ะกะพะฑะตัะธัะต ะฟัะพะตะบั:

```bash
npm run build
```

ะะฐะฟัััะธัะต ั ะฟะพะผะพััั pm2 (ัะตะบะพะผะตะฝะดัะตััั ะดะปั ะฟัะพะดะฐะบัะตะฝะฐ):
ะัะปะธ pm2 ะฝะต ัััะฐะฝะพะฒะปะตะฝ, ัะพ ัััะฐะฝะพะฒะธัะต ะตะณะพ:

```bash
npm install -g pm2
```

ะะฐะฟัััะธัะต ัะฐะผ ะฟัะพัะตัั:

```bash
pm2 start dist/index.js --name "umbot-production"
```

ะะปั ัะพะณะพ ััะพะฑั ะฟะพัะปะต ะฟะตัะตะทะฐะณััะทะบะธ ัะตัะฒะตัะฐ ะฟัะธะปะพะถะตะฝะธะต ะฑัะปะพ ะดะพัััะฟะฝะพ, ะฒัะฟะพะปะฝะธัะต ัะปะตะดัััะธะต ะบะพะผะฐะฝะดั:

```bash
pm2 startup
pm2 save
```

ะขะตะฟะตัั ะฒะฐั ะฝะฐะฒัะบ ะดะพัััะฟะตะฝ ะฟะพ HTTPS ะธ ะณะพัะพะฒ ะบ ะฟะพะดะบะปััะตะฝะธั ะฒ ะบะพะฝัะพะปัั ัะฐะทัะฐะฑะพััะธะบะฐ:

- ะฏะฝะดะตะบั.ะะธะฐะปะพะณะธ
- ะกะฑะตั Salute
- ะะฐัััั ะดะปั ัะฐะทัะฐะฑะพััะธะบะพะฒ
- Telegram BotFather, VK Callback API, Viber Bot Settings ะธ ะดั.

## ะะฐัะธะฐะฝัั ะทะฐะฟััะบะฐ

### 1. ะัััะพะตะฝะฝัะน ัะตัะฒะตั (ัะตะบะพะผะตะฝะดัะตััั ะดะปั ะฟัะพัััั ัะปััะฐะตะฒ)

```ts
bot.start('0.0.0.0', 3000);
```

### 2. ะะฝัะตะณัะฐัะธั ะฒ ัััะตััะฒัััะตะต ะฟัะธะปะพะถะตะฝะธะต (Express/Fastify)

ะกะผ. (ะฃะฝะธะฒะตััะฐะปัะฝัะน webhook-ะพะฑัะฐะฑะพััะธะบ.)[src/docs/platform-integration.md]

## Docker

ะัะธ ัะพะทะดะฐะฝะธะธ ะฟัะพะตะบัะฐ ัะตัะตะท CLI ั ัะปะฐะณะพะผ --prod, ะณะตะฝะตัะธััะตััั Dockerfile.
ะัะธะผะตั ะทะฐะฟััะบะฐ:

```bash
docker build -t my-bot .
docker run -p 3000:3000 -e YANDEX_TOKEN=... my-bot
```

## CI/CD

ะจะฐะฑะปะพะฝ .github/workflows/deploy.yml ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฝะฐัััะฐะธะฒะฐะตั:

- ะกะฑะพัะบั ะฟัะพะตะบัะฐ,
- ะกะฑะพัะบั Docker-ะพะฑัะฐะทะฐ,
- ะะตะฟะปะพะน ะฝะฐ ัะตัะฒะตั ัะตัะตะท SSH.

> ๐ ะะตะทะพะฟะฐัะฝะพััั: ะฝะธะบะพะณะดะฐ ะฝะต ะบะพะผะผะธัััะต .env ะฒ Git. ะัะฟะพะปัะทัะนัะต GitHub Secrets.
