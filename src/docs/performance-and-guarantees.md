# –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –≥–∞—Ä–∞–Ω—Ç–∏–∏ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## –í–≤–µ–¥–µ–Ω–∏–µ

`umbot` —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Å –ø—Ä–∏—Ü–µ–ª–æ–º –Ω–∞ **–≤—ã—Å–æ–∫—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –∏ **–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞**. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ
–≤–∞–∂–Ω–æ, —É—á–∏—Ç—ã–≤–∞—è –∂–µ—Å—Ç–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, 3 —Å–µ–∫—É–Ω–¥—ã –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–î–∏–∞–ª–æ–≥–æ–≤). –í —ç—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ
–ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å–∞–Ω–æ, —á—Ç–æ –≤—Ö–æ–¥–∏—Ç –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, **–∫–∞–∫–∏–µ –≥–∞—Ä–∞–Ω—Ç–∏–∏** –æ–Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç, –∏ **–Ω–∞—Å–∫–æ–ª—å–∫–æ
–±—ã—Å—Ç—Ä–æ** –æ–Ω–∞ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å —Ç–∏–ø–∏—á–Ω—ã–º–∏ –∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏.

## –ì–∞—Ä–∞–Ω—Ç–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

`umbot` **–≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç**, —á—Ç–æ –µ—ë —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–¥–Ω–æ–≥–æ –≤—Ö–æ–¥—è—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (–æ—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è
–≥–æ—Ç–æ–≤–æ–≥–æ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ–±—ä–µ–∫—Ç–∞ –æ—Ç–≤–µ—Ç–∞) **–Ω–µ –ø—Ä–µ–≤—ã—Å–∏—Ç 1 —Å–µ–∫—É–Ω–¥—É** –≤ –ø–æ–¥–∞–≤–ª—è—é—â–µ–º –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è(–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥ –¥–æ 500 000).

> **–í–∞–∂–Ω–æ:** –≠—Ç–æ –≤—Ä–µ–º—è **–Ω–µ –≤–∫–ª—é—á–∞–µ—Ç**:
>
> - –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è **–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –ª–æ–≥–∏–∫–∏** –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `action` –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ (`BotController`).
> - –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è **–≤–Ω–µ—à–Ω–∏—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π** –≤–Ω—É—Ç—Ä–∏ `action`, —Ç–∞–∫–∏—Ö, –∫–∞–∫ –≤—ã–∑–æ–≤—ã —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö API, —Å–ª–æ–∂–Ω—ã–µ
    –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∏–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, **—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É**, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–º—É `umbot`, –æ—Å—Ç–∞–µ—Ç—Å—è **–æ–∫–æ–ª–æ 2 —Å–µ–∫—É–Ω–¥** –∏–∑ –æ–±—â–µ–≥–æ 3-—Å–µ–∫—É–Ω–¥–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞
–ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ **—Å–≤–æ–µ–π –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π –ª–æ–≥–∏–∫–∏**.

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –ª–æ–≥–∏–∫–∏ **—Å—É–º–º–∏—Ä—É—é—Ç—Å—è** –∏ –¥–æ–ª–∂–Ω—ã **–≤–º–µ—Å—Ç–µ**
> —É–ª–æ–∂–∏—Ç—å—Å—è –≤ –ª–∏–º–∏—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

–í—Ä–µ–º—è, –∫–æ—Ç–æ—Ä–æ–µ `umbot` —Ç—Ä–∞—Ç–∏—Ç –Ω–∞ —Å–≤–æ—é –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –æ–±—Ä–∞–±–æ—Ç–∫—É, –≤–∫–ª—é—á–∞–µ—Ç:

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞:** –†–∞–∑–±–æ—Ä –≤—Ö–æ–¥—è—â–µ–≥–æ JSON, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ —Å–µ—Å—Å–∏–∏ –∏ –¥—Ä—É–≥–∏—Ö
   –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
2. **–ü–æ–∏—Å–∫ –∫–æ–º–∞–Ω–¥—ã:** –ü—Ä–æ—Ö–æ–¥ –ø–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–æ–º–∞–Ω–¥–∞–º –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è.
    - –î–ª—è –∫–æ–º–∞–Ω–¥ —Å `isPattern: true` ‚Äì –∫–æ–º–ø–∏–ª—è—Ü–∏—è (–µ—Å–ª–∏ –Ω–µ –≤ –∫—ç—à–µ) –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π.
3. **–†–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:** –ß—Ç–µ–Ω–∏–µ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (—Ñ–∞–π–ª–æ–≤–∞—è
   —Å–∏—Å—Ç–µ–º–∞ –∏–ª–∏ –ë–î).
4. **–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞:** –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–±—ä–µ–∫—Ç–∞ –æ—Ç–≤–µ—Ç–∞, –≤–∫–ª—é—á–∞—è:
    - **–ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤:** –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `Card.addImage(...)` –∏–ª–∏ `Sound.addSound(...)` —Å _–ø—É—Ç—è–º–∏
      –∫ —Ñ–∞–π–ª–∞–º_, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, –ø–æ–ª—É—á–∞–µ—Ç –µ–≥–æ `token` –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –ë–î –¥–ª—è
      –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
5. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤:** –ó–∞–ø–∏—Å—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∑–∞–ø—Ä–æ—Å–µ –∏ –æ—Ç–≤–µ—Ç–µ.
6. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –æ—Ç–≤–µ—Ç–∞** –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ.

## –°—Ü–µ–Ω–∞—Ä–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –∑–∞–º–µ—Ä—ã

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è **—Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ª–æ–≥–∏–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏** (—à–∞–≥–∏ 1-6 –≤—ã—à–µ),
–∏—Å–∫–ª—é—á–∞—è –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `action`. –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–æ–¥–∏–ª–∏—Å—å –Ω–∞ —Å–∏—Å—Ç–µ–º–µ —Å AMD Ryzen 5 5600G, 32 –ì–ë –û–ó–£, SSD.

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í—Ä–µ–º—è –ø–µ—Ä–≤–∏—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–ª–∏ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤ (–∫–æ–≥–¥–∞ `token` –¥–ª—è —Ñ–∞–π–ª–∞ –µ—â—ë –Ω–µ
> –∫—ç—à–∏—Ä–æ–≤–∞–Ω –≤ –ë–î) **–º–æ–∂–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å 1 —Å–µ–∫—É–Ω–¥—É** –∏ –≤—ã–¥–µ–ª–µ–Ω–æ –æ—Ç–¥–µ–ª—å–Ω–æ. –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è,
> –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ —Ç–µ–º –∂–µ —Ñ–∞–π–ª–∞–º –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ.

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π

–û—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ —É–¥–µ–ª–µ–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏ (`RegExp`). –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `isPattern: true`,
`umbot` **–∫–µ—à–∏—Ä—É–µ—Ç —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ `RegExp` –æ–±—ä–µ–∫—Ç—ã** (—Å –ø–æ–ª–∏—Ç–∏–∫–æ–π LRU –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ `MAX_CACHE_SIZE = 300`).
–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏ _–ø–µ—Ä–≤–æ–º_ –≤—ã–∑–æ–≤–µ `run()` —Å –∫–æ–º–∞–Ω–¥–∞–º–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–º–∏ –Ω–æ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç \*
_–∫–æ–º–ø–∏–ª—è—Ü–∏—è `RegExp`\*\*, —á—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏. –ü—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –≤—ã–∑–æ–≤–∞—Ö —Å —Ç–µ–º–∏ –∂–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏, _
\*—Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ `RegExp` –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫—ç—à–∞**, —á—Ç–æ **–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç\*\* –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

### –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

| –°—Ü–µ–Ω–∞—Ä–∏–π                                                              | –ö–æ–ª-–≤–æ –∫–æ–º–∞–Ω–¥ | –ö–æ–ª-–≤–æ –∞–∫—Ç–∏–≤. —Ñ—Ä–∞–∑ | –ò–∑ –Ω–∏—Ö —Ä–µ–≥. –≤—ã—Ä–∞–∂–µ–Ω–∏–π | –ü–µ—Ä–≤–∏—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π   | –ù–∞–∏–ª—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç | –°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç | –ù–∞–∏—Ö—É–¥—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏                                                                                                        |
| :-------------------------------------------------------------------- | :------------ | :----------------- | :-------------------- | :------------------------------- | :------------------ | :---------------- | :------------------ | :----------------------------------------------------------------------------------------------------------------- |
| **–ü—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫ (—Ç–æ–ª—å–∫–æ —Å–ª–æ–≤–∞)**                                      | 2             | 2                  | 0                     | –ù–µ—Ç                              | 1.92 –º—Å             | 2.15 –º—Å           | 2.42 –º—Å             | –¢–∏–ø–∏—á–Ω—ã–π –ø—Ä–æ—Å—Ç–æ–π –Ω–∞–≤—ã–∫.                                                                                            |
| **–°–ª–æ–∂–Ω—ã–π –ø–æ–∏—Å–∫ (–º–Ω–æ–≥–æ –∫–æ–º–∞–Ω–¥, –±–µ–∑ —Ä–µ–≥—É–ª—è—Ä–æ–∫)**                       | 2000          | 2000               | 0                     | –ù–µ—Ç                              | 2.08 –º—Å             | 2.17 –º—Å           | 2.45 –º—Å             | –°–ª–æ–∂–Ω—ã–π –Ω–∞–≤—ã–∫, –±–µ–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤.                                                                                      |
| **–ü–æ–∏—Å–∫ —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏ (–∫—ç—à –Ω–µ –ø—Ä–æ–≥—Ä–µ—Ç)**                  | 2000          | 2000               | 2000                  | –ù–µ—Ç                              | 2.10 –º—Å             | 3.93 –º—Å           | 19.23 –º—Å            | –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∫—ç—à–∏—Ä–æ–≤–∞–Ω—ã (`RegExp` –≤ `Text.regexCache`). –≠—Ç–∏ —Ü–∏—Ñ—Ä—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É —Å—Ü–µ–Ω–∞—Ä–∏—é —Å 2000 —Ä–µ–≥—É–ª—è—Ä–∫–∞–º–∏. |
| **–ü–æ–∏—Å–∫ —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏ (–∫—ç—à –ø—Ä–æ–≥—Ä–µ—Ç)**                     | 2000          | 2000               | 2000                  | –ù–µ—Ç                              | 1.47 –º—Å             | 2.40 –º—Å           | 3.68 –º—Å             | –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥ —Å –ø—Ä–æ–≥—Ä–µ—Ç—ã–º –∫—ç—à–µ–º.                                                                            |
| **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–∫—ç—à –ø—É—Å—Ç)**                                   | 10            | 20                 | 0                     | 2 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–ø–æ 1 –ú–ë)          | ~200 –º—Å             | ~600 –º—Å           | ~1100 –º—Å\*          | \*–í—Ä–µ–º—è –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—Å–∏—Ç—å 1 —Å–µ–∫—É–Ω–¥—É.                                                                                 |
| **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–∫—ç—à –ø–æ–ª–æ–Ω)**                                  | 10            | 20                 | 0                     | 2 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (—É–∂–µ –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞–Ω—ã) | 1.95 –º—Å             | 2.5 –º—Å            | 2.97 –º—Å             | –ë—ã—Å—Ç—Ä–æ, —Ç.–∫. `token` —É–∂–µ –µ—Å—Ç—å.                                                                                     |
| **–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–Ω–æ–≥–æ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π)** | 2,000,000     | 0                  | 2,000,000             | –ù–µ—Ç                              | 2.25 –º—Å             | 487.8 –º—Å          | 986.8 –º—Å            | –¢–æ–ª—å–∫–æ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è, –∫—ç—à `RegExp`.                                                                         |

> \*–ù–∞–∏—Ö—É–¥—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Å—Ç—Ä–æ–∫–µ "–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–∫—ç—à –ø—É—Å—Ç)" –ø—Ä–µ–≤—ã—à–∞–µ—Ç 1 —Å–µ–∫—É–Ω–¥—É, —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–ø–∏—Å–∞–Ω–∏—é –≤—ã—à–µ.
> –≠—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –≤ —Ç–∞–±–ª–∏—Ü–µ, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—Å–∏—Ç—å –≥–∞—Ä–∞–Ω—Ç–∏—é.
> –î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã, –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã. –°–¥–µ–ª–∞—Ç—å —ç—Ç–æ –º–æ–∂–Ω–æ
> –∏—Å–ø–æ–ª—å–∑—É—è –∫–ª–∞—Å—Å Preload.
> –¢–∞–∫–∂–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è
> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –±–µ–∑ re-Dos.

## –°—Ü–µ–Ω–∞—Ä–∏–∏, –ø—Ä–∏ –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–≤—ã—à–µ–Ω–æ 1 —Å–µ–∫—É–Ω–¥–∞

- **–ü–µ—Ä–≤–∏—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤—ã—Ö –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤:** –ö–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ —Ç–∞–±–ª–∏—Ü–µ, –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–ª–∏ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤ –º–æ–∂–µ—Ç
  –∑–∞–Ω—è—Ç—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è (—Å–æ—Ç–Ω–∏ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥ –∏–ª–∏ –±–æ–ª–µ–µ), –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —Ñ–∞–π–ª—ã –±–æ–ª—å—à–∏–µ –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
  –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω—ã. –≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–∫—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—Å–∏—Ç—å 1 —Å–µ–∫—É–Ω–¥—É –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.
- **–û—á–µ–Ω—å –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–∞–Ω–¥ —Å –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–º–∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏ (ReDoS), –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –≤
  –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ, –∏ –≤—Å–µ –æ–Ω–∏ "—Ö–æ–ª–æ–¥–Ω—ã–µ" (–∫—ç—à –ø—É—Å—Ç).** –≠—Ç–æ –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ –ø—Ä–∏ —Ä–∞–∑—É–º–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∏ –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ
  –ø—Ä–æ–≤–µ—Ä–∫–∞ ReDoS —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–∞ —ç—Ç–∞–ø–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã. –û–±—ã—á–Ω–æ –∫—ç—à `RegExp` –±—ã—Å—Ç—Ä–æ "–ø—Ä–æ–≥—Ä–µ–≤–∞–µ—Ç—Å—è".
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Å–±–æ–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–±–ª–µ–º—ã —Å GC, –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ CPU/–¥–∏—Å–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ).
- –î–æ–±–∞–≤–ª–µ–Ω–æ –º–Ω–æ–≥–æ –∫–æ–º–∞–Ω–¥ –∏ –∏–¥–µ—Ç —Å–∏–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä(–±–æ–ª–µ–µ 50 –æ–¥–Ω–æ–º–æ–º–µ–Ω—Ç–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π). –î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã
  –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ–π **–ö–∞—Å—Ç–æ–º–Ω—ã–π –ø–æ–∏—Å–∫**

## –ö–∞—Å—Ç–æ–º–Ω—ã–π –ø–æ–∏—Å–∫

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `umbot` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–∏–Ω–µ–π–Ω—ã–π –ø–æ–∏—Å–∫ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–æ–¥—Å—Ç—Ä–æ–∫ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π.
–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ—Ç—É, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—é –¥—Ä—É–≥–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º (–ø–æ—Ä—è–¥–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤–∞–∂–µ–Ω).

–û–¥–Ω–∞–∫–æ –ø—Ä–∏ —á–∏—Å–ª–µ –∫–æ–º–∞–Ω–¥ >1000 –∏–ª–∏ –≤ —É—Å–ª–æ–≤–∏—è—Ö –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –≤—ã –º–æ–∂–µ—Ç–µ **–ø–æ–¥–∫–ª—é—á–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞**:

```ts
const bot = new Bot();
bot.setCustomCommandResolver((userCommand, commands) => {
    // –ü—Ä–∏–º–µ—Ä: –≤–æ–∑–≤—Ä–∞—Ç –∫–æ–º–∞–Ω–¥—ã –ø–æ —Ö—ç—à—É (–≤–∞—à–∏ –ø—Ä–∞–≤–∏–ª–∞)
    for (const [name, cmd] of commands) {
        if (cmd.slots.some((slot) => userCommand.includes(slot as string))) {
            return name;
        }
    }
    return null;
});
```

üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –ø–µ—Ä–µ–±–æ—Ä–∞, –µ—Å–ª–∏ –æ–Ω –∫—Ä–∏—Ç–∏—á–µ–Ω –¥–ª—è –≤–∞—à–µ–π –ª–æ–≥–∏–∫–∏.
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Map<string, string>) –¥–ª—è —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—â–∏—Ö—Å—è —Ñ—Ä–∞–∑.
–î–ª—è fuzzy-–ø–æ–∏—Å–∫–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ fuse.js –∏–ª–∏ natural.
–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ä–µ–≥—É–ª—è—Ä–æ–∫ ‚Äî –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –ø—Ä–æ –∑–∞—â–∏—Ç—É –æ—Ç ReDoS.

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

`umbot` –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **–æ—Ç–ª–∏—á–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤. –ë–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–º—É
–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—é (`RegExp`, `userData`, —Ç–æ–∫–µ–Ω—ã –º–µ–¥–∏–∞), **–ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –≤—ã–∑–æ–≤—ã `run()` –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±—ã—Å—Ç—Ä–µ–µ**, —á–µ–º
–ø–µ—Ä–≤—ã–µ. –í —Ä–µ–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö (–±–µ–∑ –ø–µ—Ä–≤–∏—á–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤) –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –≤—Ä–µ–º—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ **–Ω–∞–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ 1 —Å–µ–∫—É–Ω–¥—ã**,
–æ—Å—Ç–∞–≤–ª—è—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É **–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è** –¥–ª—è –µ–≥–æ –ª–æ–≥–∏–∫–∏. –£–∑–∫–∏–º –º–µ—Å—Ç–æ–º —è–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä–≤–∏—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤, –Ω–æ
—ç—Ç–æ —Ä–∞–∑—É–º–Ω—ã–π –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ **–Ω–∞–¥–µ–∂–Ω–æ —É–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è** –≤ 1 —Å–µ–∫—É–Ω–¥—É –¥–ª—è
–≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
–¢–∞–∫–∂–µ –≤—ã –º–æ–∂–µ—Ç–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è –≤ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∑–∞–ø—É—Å—Ç–∏–≤ `benchmark`. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
—Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç.

```bash
node --expose-gc  .\benchmark\command.js
```

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ–º –ø–∞–º—è—Ç–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç—ã. –í —Ç–∞–±–ª–∏—Ü–µ –±—É–¥—É—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
–∫–æ–º–∞–Ω–¥ –æ—Ç 50 –¥–æ 2 000 000
